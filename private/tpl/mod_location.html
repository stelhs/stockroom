<div align="center">

    <!-- START INSERT : object_is_absent.html --><!-- END INSERT : object_is_absent.html -->
    <!-- START INSERT : location_is_absent.html --><!-- END INSERT : location_is_absent.html -->

    <!-- START BLOCK : location_clipboard -->
        <div style="text-align: left; vertical-align: top;">
            <div style="display: block;
                        border: solid 1px blue;
                        padding: 10px;
                        padding-left: 0px;
                        height: 100px">
                <a href="{link_reset}">
                    <img style="vertical-align: top; float: left; padding: 10px" src="{http_img}cut.png">
                </a>
                {id}: <!-- START BLOCK : clipboard_location_path --><a href="{link}">{name}</a><!-- END BLOCK : clipboard_location_path -->
            </div>
        </div>
    <!-- END BLOCK : location_clipboard -->


    <h3 style="color: green"> Локация </h3>
    <h2>
        <!-- START BLOCK : location_path -->
            <a href="{link}"><span style="color: green">{name}</span></a>
        <!-- END BLOCK : location_path -->
    </h2>


    <!-- START BLOCK : location -->
        <!-- START BLOCK : location_photo -->
            <div class="location_photo">
                <a href="{link_remove}" onclick="return window.confirm('Удалить фотографию?')">
                    <img class="location_remove_img" src="{http_img}delete.png">
                </a>
                <a href="{img_orig}">
                    <img src="{img}">
                </a>
            </div>
        <!-- END BLOCK : location_photo -->


        <script>
            function submit_location(method)
            {
                var form;
                form = document.getElementById("location_form");
                fix_percent(form.location_fullness);
                form.method.value = method;
                if (!form.location_name.value) {
                    alert("Name is empty");
                    return;
                }

                if (form.location_size1.value || form.location_size1.value || form.location_size3.value) {
                    if (!form.location_size1.value) {
                        alert("size1 is empty");
                        return;
                    }

                    if (!form.location_size2.value) {
                        alert("size2 is empty");
                        return;
                    }

                    if (!form.location_size3.value) {
                        alert("size3 is empty");
                        return;
                    }
                }
                form.submit();
            }
        </script>
        <div>
            <form name="location" method="POST" action="{form_url}" id="location_form" enctype='multipart/form-data'>
                <input type="hidden" name="method" value="">
                <input type="hidden" name="location_id" value="{location_id}">

                <table border="0" width="100%">
                    <tr>
                        <td align="right" valign="top"><span style="color: green">##{location_id}</span></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td align="right" valign="top">Название: </td>
                        <td> <input type="text" name="location_name" size="20" value="{location_name}" onchange="light_input(this)"></td>
                    </tr>
                    <tr>
                        <td align="right" valign="top">Описание: </td>
                        <td>
                            <textarea rows=3 cols=23 name="location_description" onchange="light_input(this)">{location_description}</textarea>
                        </td>
                    </tr>
                    <tr>
                        <td align="right" valign="top">Размеры: </td>
                        <td>
                            <input type="text" name="location_size1" size="3" value="{location_size1}" onchange="light_input(this)">
                            <input type="text" name="location_size2" size="3" value="{location_size2}" onchange="light_input(this)">
                            <input type="text" name="location_size3" size="3" value="{location_size3}" onchange="light_input(this)">
                            {location_volume}л.
                        </td>
                    </tr>
                    <tr>
                        <td align="right" valign="top">Заполненность: </td>
                        <td>
                            <input type="text" name="location_fullness" size="2" value="{location_fullness}" id="location_fullness" autocomplete="off" onchange="light_input(this)"> %
                            <a href="javascript:;" onclick="dec_input('location_fullness', 5, 0)">
                                <img style="margin-left: 100px" src="{http_img}minus_mini.png">
                            </a>
                            <a href="javascript:;" onclick="inc_input('location_fullness', 5, 100)">
                                <img style="margin-left: 50px" src="{http_img}plus_mini.png">
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td>Фото узла:</td>
                        <td><input type="file" name="photos[]" accept="image/*" multiple></td>
                    </tr>
                </table>
                <div style="text-align: left">
                    <a href="javascript:;" onclick="submit_location('edit_location')">
                        <img class="img_button" src="{http_img}edit.png">
                    </a>

                    <a href="javascript:;" onclick="submit_location('add_sublocation')">
                        <img class="img_button" src="{http_img}add_subnode.png">
                    </a>

                    <a href="javascript:;" onclick="submit_location('add_location')">
                        <img class="img_button" src="{http_img}add_node.png">
                    </a>

                    <a href="{link_delete}" onclick="return window.confirm('Удалить узел \'{location_name}\' ?')">
                        <img class="img_button" src="{http_img}delete.png">
                    </a>

                    <a href="javascript:;" onclick="submit_location('cut_location')">
                        <img class="img_button" src="{http_img}cut.png">
                    </a>

                    <!-- START BLOCK : past_location -->
                        <a href="javascript:;" onclick="if (window.confirm('Вставить узел \'{past_location_name}\' в узел \'{location_name}\' ?')) submit_location('past_location')">
                            <img class="img_button" src="{http_img}past.png">
                        </a>
                    <!-- END BLOCK : past_location -->
                    <!-- START BLOCK : past_location_blocked -->
                        <img class="img_button" src="{http_img}past.png" style="opacity: 0.2;">
                    <!-- END BLOCK : past_location_blocked -->

                    <a href="{link_add_object}">
                        <img class="img_button" src="{http_img}add_object.png">
                    </a>
                    <!-- START BLOCK : take_away -->
                        <a href="javascript:;" onclick="if (window.confirm('Взять коробку ?')) submit_location('take_away')">
                            <img class="img_button" src="{http_img}take_away.png">
                        </a>
                    <!-- END BLOCK : take_away -->
                    <!-- START BLOCK : return_back -->
                        <a href="javascript:;" onclick="if (window.confirm('Вернуть коробку ?')) submit_location('return_back')">
                            <img class="img_button" src="{http_img}return_back.png">
                        </a>
                    <!-- END BLOCK : return_back -->

                    <a href="{free_boxes_link}">
                        <img class="img_button" src="{http_img}free_boxes.png">
                    </a>

                </div>
            </form>
        </div>
    <!-- END BLOCK : location -->

    <!-- START BLOCK : no_location -->
        Location {location_id} is not found
    <!-- END BLOCK : no_location -->

    <!-- START BLOCK : sub_locations_list -->
        <br><br>
        <p style="text-align: left; color: green">Локации ({total_number}):</p>
        <table border="1" width="100%">
            <tr>
                <th>Id</th>
                <th>Название</th>
                <th>%</th>
                <th></th>
                <th></th>
                <th>Описание</th>
            </tr>
            <!-- START BLOCK : sub_locations_row -->
                <tr>
                    <td><a href="{link}" style="color: green">##{id}</a></td>
                    <td><a href="{link}">{name}</a></td>
                    <td><a href="{link}">{fullness}</a></td>
                    <td><a href="{link}" style="color: blue">{objects_number}</a></td>
                    <td><a href="{link}"><span style="color: green">{location_number}</span></a></td>
                    <td><a href="{link}">{description}</a></td>
                </tr>
            <!-- END BLOCK : sub_locations_row -->
        </table>
        <br><br>
    <!-- END BLOCK : sub_locations_list -->

     <!-- START BLOCK : objects_list -->
        <p style="text-align: left; color: blue">Предметы ({total_number}):</p>
        <table align="left">
            <!-- START BLOCK : object_row -->
                <tr>
                    <td>
                        <a href="{link_to_object}">
                            <div class="obj_photo_node">
                                    <img src="{img}">
                            </div>
                        </a>
                    </td>
                    <td>
                        <!-- START BLOCK : object_is_absent -->
                            <span style="color: red">Предмет отсутствует</span><br>
                        <!-- END BLOCK : object_is_absent -->
                        <a href="{link_to_object}">
                            <span style="color: blue">#{id}</span>
                            <!-- START BLOCK : object_count -->
                                <span style="color: red">{count}шт.</span>
                            <!-- END BLOCK : object_count -->
                            <b>{name}</b><br>
                        </a>
                        <span style="color: #1177AA">{attrs}</span><br>
                        <span style="color: #777777">{description}</span><br>
                        <!-- START BLOCK : catalog_path -->
                            <a href="{link}"><span style="color: orange">{name}</span></a>
                        <!-- END BLOCK : catalog_path -->
                    </td>
                </tr>
            <!-- END BLOCK : object_row -->
        </table>
    <!-- END BLOCK : objects_list -->

</div>